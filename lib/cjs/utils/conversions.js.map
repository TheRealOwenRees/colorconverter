{"version":3,"file":"conversions.js","names":["_math","require","toRgbBase","colorObj","format","value","hexToRgb","hslToRgb","hsvToRgb","undefined","rgbToHsl","rgb","r","g","b","max","Math","min","h","s","l","diff","round","hsl","_hsl$h","_hsl$s","_hsl$l","hue2rgb","p","q","t","rgbToHsv","v","diffc","c","rr","gg","bb","hsv","_hsv$h","_hsv$s","_hsv$v","i","floor","f","mod","rgbToHex","binaryRgb","toString","padStart","rgbaToHexA","rgba","_rgba$a","aHex","convertDecimalToHex","a","concat","hex","parseInt","replace"],"sources":["../../../src/utils/conversions.ts"],"sourcesContent":["/*\n    Based on the following gist:\n    https://gist.github.com/avisek/eadfbe7a7a169b1001a2d3affc21052e\n*/\n\nimport { type ColorObjType, type HslObject, type HsvObject, type RgbObject } from '../types'\nimport { convertDecimalToHex } from './math'\n\n// any color type to rgb\nexport function toRgbBase (colorObj: ColorObjType): ColorObjType {\n  if (colorObj.format === 'rgb' || colorObj.format === 'rgba') {\n    return colorObj\n  }\n  if (colorObj.format === 'hex' && typeof colorObj.value === 'string') {\n    return {\n      format: 'rgb',\n      value: hexToRgb(colorObj.value)\n    }\n  }\n  if (colorObj.format === 'hsl') {\n    return {\n      format: 'rgb',\n      value: hslToRgb(colorObj.value as HslObject)\n    }\n  }\n  if (colorObj.format === 'hsv') {\n    return {\n      format: 'rgb',\n      value: hsvToRgb(colorObj.value as HsvObject)\n    }\n  }\n  return {\n    format: undefined,\n    value: undefined\n  }\n}\n\n// TODO HSLA to RGBA and add to toRgbBase as well, returning RGBA\n\nexport function rgbToHsl (rgb: RgbObject): HslObject {\n  const r = rgb.r / 255\n  const g = rgb.g / 255\n  const b = rgb.b / 255\n\n  const max = Math.max(r, g, b)\n  const min = Math.min(r, g, b)\n\n  let h = (max + min) / 2\n  let s\n  const l = (max + min) / 2\n\n  if (max === min) {\n    h = 0\n    s = 0 // Achromatic\n  } else {\n    const diff = max - min\n    s = l > 0.5 ? diff / (2 - max - min) : diff / (max + min)\n\n    switch (max) {\n      case r:\n        h = (g - b) / diff + (g < b ? 6 : 0)\n        break\n      case g:\n        h = (b - r) / diff + 2\n        break\n      case b:\n        h = (r - g) / diff + 4\n        break\n      default:\n        break\n    }\n\n    h /= 6\n  }\n\n  return {\n    h: Math.round(h * 360),\n    s: s * 100,\n    l: l * 100\n  }\n}\n\nexport function hslToRgb (hsl: HslObject): RgbObject {\n  function hue2rgb (p: number, q: number, t: number): number {\n    if (t < 0) {\n      t += 1\n    }\n\n    if (t > 1) {\n      t -= 1\n    }\n\n    if (t < 1 / 6) {\n      return p + (q - p) * 6 * t\n    }\n\n    if (t < 1 / 2) {\n      return q\n    }\n\n    if (t < 2 / 3) {\n      return p + (q - p) * (2 / 3 - t) * 6\n    }\n\n    return p\n  }\n\n  const h = (hsl.h ?? 0) / 360\n  const s = (hsl.s ?? 0) / 100\n  const l = (hsl.l ?? 0) / 100\n\n  let r\n  let g\n  let b\n\n  if (s === 0) {\n    r = g = b = l // Achromatic\n  } else {\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s\n    const p = 2 * l - q\n\n    r = hue2rgb(p, q, h + 1 / 3)\n    g = hue2rgb(p, q, h)\n    b = hue2rgb(p, q, h - 1 / 3)\n  }\n\n  return {\n    r: Math.round(r * 255),\n    g: Math.round(g * 255),\n    b: Math.round(b * 255)\n  }\n}\n\nexport function rgbToHsv (rgb: RgbObject): HsvObject {\n  if (rgb === undefined) {\n    return {\n      h: undefined,\n      s: undefined,\n      v: undefined\n    }\n  }\n\n  const r = rgb.r / 255\n  const g = rgb.g / 255\n  const b = rgb.b / 255\n\n  const max = Math.max(r, g, b)\n  const min = Math.min(r, g, b)\n\n  let h = max\n  let s = max\n  const v = max\n\n  const diff = max - min\n  const diffc = (c: number): number => (max - c) / 6 / diff + 1 / 2\n\n  if (diff === 0) {\n    h = 0\n    s = 0\n  } else {\n    s = diff / max\n    const rr = diffc(r)\n    const gg = diffc(g)\n    const bb = diffc(b)\n\n    if (r === max) {\n      h = b - g\n    } else if (g === max) {\n      h = 1 / 3 + rr - bb\n    } else if (b === max) {\n      h = 2 / 3 + gg - rr\n    }\n\n    if (h < 0) {\n      h += 1\n    } else if (h > 1) {\n      h -= 1\n    }\n  }\n\n  return {\n    h: Math.round(h * 360),\n    s: s * 100,\n    v: v * 100\n  }\n}\n\nexport function hsvToRgb (hsv: HsvObject): RgbObject {\n  const h = (hsv.h ?? 0) / 360 * 6\n  const s = (hsv.s ?? 0) / 100\n  const v = (hsv.v ?? 0) / 100\n\n  const i = Math.floor(h)\n  const f = h - i\n  const p = v * (1 - s)\n  const q = v * (1 - f * s)\n  const t = v * (1 - (1 - f) * s)\n\n  const mod = i % 6\n\n  const r = [v, q, p, p, t, v][mod]\n  const g = [t, v, v, q, p, p][mod]\n  const b = [p, p, t, v, v, q][mod]\n  return {\n    r: Math.round(r * 255),\n    g: Math.round(g * 255),\n    b: Math.round(b * 255)\n  }\n}\n\nexport function rgbToHex (rgb: RgbObject): string {\n  const binaryRgb = (rgb.r << 16) | (rgb.g << 8) | rgb.b\n  return binaryRgb.toString(16).padStart(6, '0')\n}\n\nexport function rgbaToHexA (rgba: RgbObject): string {\n  const binaryRgb = rgbToHex({ r: rgba.r, g: rgba.g, b: rgba.b })\n  const aHex = convertDecimalToHex(rgba.a ?? 1)\n  return `${binaryRgb.padStart(6, '0')}${aHex === '0' ? '00' : aHex}`\n}\n\nexport function hexToRgb (hex: string): RgbObject {\n  const rgb = parseInt(hex.replace('#', ''), 16)\n  return {\n    r: (rgb >> 16) & 0xff,\n    g: (rgb >> 8) & 0xff,\n    b: rgb & 0xff\n  }\n}\n"],"mappings":";;;;;;;;;;;;;AAMA,IAAAA,KAAA,GAAAC,OAAA;AANA;AACA;AACA;AACA;;AAKA;AACO,SAASC,SAASA,CAAEC,QAAsB,EAAgB;EAC/D,IAAIA,QAAQ,CAACC,MAAM,KAAK,KAAK,IAAID,QAAQ,CAACC,MAAM,KAAK,MAAM,EAAE;IAC3D,OAAOD,QAAQ;EACjB;EACA,IAAIA,QAAQ,CAACC,MAAM,KAAK,KAAK,IAAI,OAAOD,QAAQ,CAACE,KAAK,KAAK,QAAQ,EAAE;IACnE,OAAO;MACLD,MAAM,EAAE,KAAK;MACbC,KAAK,EAAEC,QAAQ,CAACH,QAAQ,CAACE,KAAK;IAChC,CAAC;EACH;EACA,IAAIF,QAAQ,CAACC,MAAM,KAAK,KAAK,EAAE;IAC7B,OAAO;MACLA,MAAM,EAAE,KAAK;MACbC,KAAK,EAAEE,QAAQ,CAACJ,QAAQ,CAACE,KAAkB;IAC7C,CAAC;EACH;EACA,IAAIF,QAAQ,CAACC,MAAM,KAAK,KAAK,EAAE;IAC7B,OAAO;MACLA,MAAM,EAAE,KAAK;MACbC,KAAK,EAAEG,QAAQ,CAACL,QAAQ,CAACE,KAAkB;IAC7C,CAAC;EACH;EACA,OAAO;IACLD,MAAM,EAAEK,SAAS;IACjBJ,KAAK,EAAEI;EACT,CAAC;AACH;;AAEA;;AAEO,SAASC,QAAQA,CAAEC,GAAc,EAAa;EACnD,IAAMC,CAAC,GAAGD,GAAG,CAACC,CAAC,GAAG,GAAG;EACrB,IAAMC,CAAC,GAAGF,GAAG,CAACE,CAAC,GAAG,GAAG;EACrB,IAAMC,CAAC,GAAGH,GAAG,CAACG,CAAC,GAAG,GAAG;EAErB,IAAMC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAACH,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAAC;EAC7B,IAAMG,GAAG,GAAGD,IAAI,CAACC,GAAG,CAACL,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAAC;EAE7B,IAAII,CAAC,GAAG,CAACH,GAAG,GAAGE,GAAG,IAAI,CAAC;EACvB,IAAIE,CAAC;EACL,IAAMC,CAAC,GAAG,CAACL,GAAG,GAAGE,GAAG,IAAI,CAAC;EAEzB,IAAIF,GAAG,KAAKE,GAAG,EAAE;IACfC,CAAC,GAAG,CAAC;IACLC,CAAC,GAAG,CAAC,EAAC;EACR,CAAC,MAAM;IACL,IAAME,IAAI,GAAGN,GAAG,GAAGE,GAAG;IACtBE,CAAC,GAAGC,CAAC,GAAG,GAAG,GAAGC,IAAI,IAAI,CAAC,GAAGN,GAAG,GAAGE,GAAG,CAAC,GAAGI,IAAI,IAAIN,GAAG,GAAGE,GAAG,CAAC;IAEzD,QAAQF,GAAG;MACT,KAAKH,CAAC;QACJM,CAAC,GAAG,CAACL,CAAC,GAAGC,CAAC,IAAIO,IAAI,IAAIR,CAAC,GAAGC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACpC;MACF,KAAKD,CAAC;QACJK,CAAC,GAAG,CAACJ,CAAC,GAAGF,CAAC,IAAIS,IAAI,GAAG,CAAC;QACtB;MACF,KAAKP,CAAC;QACJI,CAAC,GAAG,CAACN,CAAC,GAAGC,CAAC,IAAIQ,IAAI,GAAG,CAAC;QACtB;MACF;QACE;IACJ;IAEAH,CAAC,IAAI,CAAC;EACR;EAEA,OAAO;IACLA,CAAC,EAAEF,IAAI,CAACM,KAAK,CAACJ,CAAC,GAAG,GAAG,CAAC;IACtBC,CAAC,EAAEA,CAAC,GAAG,GAAG;IACVC,CAAC,EAAEA,CAAC,GAAG;EACT,CAAC;AACH;AAEO,SAASb,QAAQA,CAAEgB,GAAc,EAAa;EAAA,IAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA;EACnD,SAASC,OAAOA,CAAEC,CAAS,EAAEC,CAAS,EAAEC,CAAS,EAAU;IACzD,IAAIA,CAAC,GAAG,CAAC,EAAE;MACTA,CAAC,IAAI,CAAC;IACR;IAEA,IAAIA,CAAC,GAAG,CAAC,EAAE;MACTA,CAAC,IAAI,CAAC;IACR;IAEA,IAAIA,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;MACb,OAAOF,CAAC,GAAG,CAACC,CAAC,GAAGD,CAAC,IAAI,CAAC,GAAGE,CAAC;IAC5B;IAEA,IAAIA,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;MACb,OAAOD,CAAC;IACV;IAEA,IAAIC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;MACb,OAAOF,CAAC,GAAG,CAACC,CAAC,GAAGD,CAAC,KAAK,CAAC,GAAG,CAAC,GAAGE,CAAC,CAAC,GAAG,CAAC;IACtC;IAEA,OAAOF,CAAC;EACV;EAEA,IAAMV,CAAC,GAAG,EAAAM,MAAA,GAACD,GAAG,CAACL,CAAC,cAAAM,MAAA,cAAAA,MAAA,GAAI,CAAC,IAAI,GAAG;EAC5B,IAAML,CAAC,GAAG,EAAAM,MAAA,GAACF,GAAG,CAACJ,CAAC,cAAAM,MAAA,cAAAA,MAAA,GAAI,CAAC,IAAI,GAAG;EAC5B,IAAML,CAAC,GAAG,EAAAM,MAAA,GAACH,GAAG,CAACH,CAAC,cAAAM,MAAA,cAAAA,MAAA,GAAI,CAAC,IAAI,GAAG;EAE5B,IAAId,CAAC;EACL,IAAIC,CAAC;EACL,IAAIC,CAAC;EAEL,IAAIK,CAAC,KAAK,CAAC,EAAE;IACXP,CAAC,GAAGC,CAAC,GAAGC,CAAC,GAAGM,CAAC,EAAC;EAChB,CAAC,MAAM;IACL,IAAMS,CAAC,GAAGT,CAAC,GAAG,GAAG,GAAGA,CAAC,IAAI,CAAC,GAAGD,CAAC,CAAC,GAAGC,CAAC,GAAGD,CAAC,GAAGC,CAAC,GAAGD,CAAC;IAC/C,IAAMS,CAAC,GAAG,CAAC,GAAGR,CAAC,GAAGS,CAAC;IAEnBjB,CAAC,GAAGe,OAAO,CAACC,CAAC,EAAEC,CAAC,EAAEX,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC5BL,CAAC,GAAGc,OAAO,CAACC,CAAC,EAAEC,CAAC,EAAEX,CAAC,CAAC;IACpBJ,CAAC,GAAGa,OAAO,CAACC,CAAC,EAAEC,CAAC,EAAEX,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;EAC9B;EAEA,OAAO;IACLN,CAAC,EAAEI,IAAI,CAACM,KAAK,CAACV,CAAC,GAAG,GAAG,CAAC;IACtBC,CAAC,EAAEG,IAAI,CAACM,KAAK,CAACT,CAAC,GAAG,GAAG,CAAC;IACtBC,CAAC,EAAEE,IAAI,CAACM,KAAK,CAACR,CAAC,GAAG,GAAG;EACvB,CAAC;AACH;AAEO,SAASiB,QAAQA,CAAEpB,GAAc,EAAa;EACnD,IAAIA,GAAG,KAAKF,SAAS,EAAE;IACrB,OAAO;MACLS,CAAC,EAAET,SAAS;MACZU,CAAC,EAAEV,SAAS;MACZuB,CAAC,EAAEvB;IACL,CAAC;EACH;EAEA,IAAMG,CAAC,GAAGD,GAAG,CAACC,CAAC,GAAG,GAAG;EACrB,IAAMC,CAAC,GAAGF,GAAG,CAACE,CAAC,GAAG,GAAG;EACrB,IAAMC,CAAC,GAAGH,GAAG,CAACG,CAAC,GAAG,GAAG;EAErB,IAAMC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAACH,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAAC;EAC7B,IAAMG,GAAG,GAAGD,IAAI,CAACC,GAAG,CAACL,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAAC;EAE7B,IAAII,CAAC,GAAGH,GAAG;EACX,IAAII,CAAC,GAAGJ,GAAG;EACX,IAAMiB,CAAC,GAAGjB,GAAG;EAEb,IAAMM,IAAI,GAAGN,GAAG,GAAGE,GAAG;EACtB,IAAMgB,KAAK,GAAG,SAARA,KAAKA,CAAIC,CAAS;IAAA,OAAa,CAACnB,GAAG,GAAGmB,CAAC,IAAI,CAAC,GAAGb,IAAI,GAAG,CAAC,GAAG,CAAC;EAAA;EAEjE,IAAIA,IAAI,KAAK,CAAC,EAAE;IACdH,CAAC,GAAG,CAAC;IACLC,CAAC,GAAG,CAAC;EACP,CAAC,MAAM;IACLA,CAAC,GAAGE,IAAI,GAAGN,GAAG;IACd,IAAMoB,EAAE,GAAGF,KAAK,CAACrB,CAAC,CAAC;IACnB,IAAMwB,EAAE,GAAGH,KAAK,CAACpB,CAAC,CAAC;IACnB,IAAMwB,EAAE,GAAGJ,KAAK,CAACnB,CAAC,CAAC;IAEnB,IAAIF,CAAC,KAAKG,GAAG,EAAE;MACbG,CAAC,GAAGJ,CAAC,GAAGD,CAAC;IACX,CAAC,MAAM,IAAIA,CAAC,KAAKE,GAAG,EAAE;MACpBG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAGiB,EAAE,GAAGE,EAAE;IACrB,CAAC,MAAM,IAAIvB,CAAC,KAAKC,GAAG,EAAE;MACpBG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAGkB,EAAE,GAAGD,EAAE;IACrB;IAEA,IAAIjB,CAAC,GAAG,CAAC,EAAE;MACTA,CAAC,IAAI,CAAC;IACR,CAAC,MAAM,IAAIA,CAAC,GAAG,CAAC,EAAE;MAChBA,CAAC,IAAI,CAAC;IACR;EACF;EAEA,OAAO;IACLA,CAAC,EAAEF,IAAI,CAACM,KAAK,CAACJ,CAAC,GAAG,GAAG,CAAC;IACtBC,CAAC,EAAEA,CAAC,GAAG,GAAG;IACVa,CAAC,EAAEA,CAAC,GAAG;EACT,CAAC;AACH;AAEO,SAASxB,QAAQA,CAAE8B,GAAc,EAAa;EAAA,IAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA;EACnD,IAAMvB,CAAC,GAAG,EAAAqB,MAAA,GAACD,GAAG,CAACpB,CAAC,cAAAqB,MAAA,cAAAA,MAAA,GAAI,CAAC,IAAI,GAAG,GAAG,CAAC;EAChC,IAAMpB,CAAC,GAAG,EAAAqB,MAAA,GAACF,GAAG,CAACnB,CAAC,cAAAqB,MAAA,cAAAA,MAAA,GAAI,CAAC,IAAI,GAAG;EAC5B,IAAMR,CAAC,GAAG,EAAAS,MAAA,GAACH,GAAG,CAACN,CAAC,cAAAS,MAAA,cAAAA,MAAA,GAAI,CAAC,IAAI,GAAG;EAE5B,IAAMC,CAAC,GAAG1B,IAAI,CAAC2B,KAAK,CAACzB,CAAC,CAAC;EACvB,IAAM0B,CAAC,GAAG1B,CAAC,GAAGwB,CAAC;EACf,IAAMd,CAAC,GAAGI,CAAC,IAAI,CAAC,GAAGb,CAAC,CAAC;EACrB,IAAMU,CAAC,GAAGG,CAAC,IAAI,CAAC,GAAGY,CAAC,GAAGzB,CAAC,CAAC;EACzB,IAAMW,CAAC,GAAGE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAGY,CAAC,IAAIzB,CAAC,CAAC;EAE/B,IAAM0B,GAAG,GAAGH,CAAC,GAAG,CAAC;EAEjB,IAAM9B,CAAC,GAAG,CAACoB,CAAC,EAAEH,CAAC,EAAED,CAAC,EAAEA,CAAC,EAAEE,CAAC,EAAEE,CAAC,CAAC,CAACa,GAAG,CAAC;EACjC,IAAMhC,CAAC,GAAG,CAACiB,CAAC,EAAEE,CAAC,EAAEA,CAAC,EAAEH,CAAC,EAAED,CAAC,EAAEA,CAAC,CAAC,CAACiB,GAAG,CAAC;EACjC,IAAM/B,CAAC,GAAG,CAACc,CAAC,EAAEA,CAAC,EAAEE,CAAC,EAAEE,CAAC,EAAEA,CAAC,EAAEH,CAAC,CAAC,CAACgB,GAAG,CAAC;EACjC,OAAO;IACLjC,CAAC,EAAEI,IAAI,CAACM,KAAK,CAACV,CAAC,GAAG,GAAG,CAAC;IACtBC,CAAC,EAAEG,IAAI,CAACM,KAAK,CAACT,CAAC,GAAG,GAAG,CAAC;IACtBC,CAAC,EAAEE,IAAI,CAACM,KAAK,CAACR,CAAC,GAAG,GAAG;EACvB,CAAC;AACH;AAEO,SAASgC,QAAQA,CAAEnC,GAAc,EAAU;EAChD,IAAMoC,SAAS,GAAIpC,GAAG,CAACC,CAAC,IAAI,EAAE,GAAKD,GAAG,CAACE,CAAC,IAAI,CAAE,GAAGF,GAAG,CAACG,CAAC;EACtD,OAAOiC,SAAS,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;AAChD;AAEO,SAASC,UAAUA,CAAEC,IAAe,EAAU;EAAA,IAAAC,OAAA;EACnD,IAAML,SAAS,GAAGD,QAAQ,CAAC;IAAElC,CAAC,EAAEuC,IAAI,CAACvC,CAAC;IAAEC,CAAC,EAAEsC,IAAI,CAACtC,CAAC;IAAEC,CAAC,EAAEqC,IAAI,CAACrC;EAAE,CAAC,CAAC;EAC/D,IAAMuC,IAAI,GAAG,IAAAC,yBAAmB,GAAAF,OAAA,GAACD,IAAI,CAACI,CAAC,cAAAH,OAAA,cAAAA,OAAA,GAAI,CAAC,CAAC;EAC7C,UAAAI,MAAA,CAAUT,SAAS,CAACE,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAAO,MAAA,CAAGH,IAAI,KAAK,GAAG,GAAG,IAAI,GAAGA,IAAI;AACnE;AAEO,SAAS/C,QAAQA,CAAEmD,GAAW,EAAa;EAChD,IAAM9C,GAAG,GAAG+C,QAAQ,CAACD,GAAG,CAACE,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC;EAC9C,OAAO;IACL/C,CAAC,EAAGD,GAAG,IAAI,EAAE,GAAI,IAAI;IACrBE,CAAC,EAAGF,GAAG,IAAI,CAAC,GAAI,IAAI;IACpBG,CAAC,EAAEH,GAAG,GAAG;EACX,CAAC;AACH"}