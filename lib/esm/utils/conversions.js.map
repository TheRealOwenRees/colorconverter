{"version":3,"file":"conversions.js","names":["convertDecimalToHex","expandHex","labDeltaE","M1","M2","invM1","invM2","referenceWhiteConstants","toRgbBase","colorObj","format","rgbToNormalizedRgb","value","hexToNormalizedRgb","hexToRgb","hslToRgbNormalized","hsvToRgbNormalized","lab","lchToLab","xyz","labToXyz","xyzToRgbNormalized","oklab","lRGB","okLabToLinearRgb","lRgbToNormalizedRgb","r","undefined","g","b","a","hexColor","rgb","rgbNormalizedToRgb","Math","round","rgbNormalizedToRgbPercent","lrgbToRgb","lrgb","Error","fn","c","abs","pow","rgbToHex","binaryRgb","toString","padStart","rgbaToHex8","rgba","aHex","rgbNormalizedToHsl","max","min","h","s","l","diff","rgbNormalizedToHsv","v","diffc","rr","gg","bb","hsl","hue2rgb","p","q","t","hsv","i","floor","f","mod","hex","parseInt","replace","rgbNormalizedToCmy","m","y","cmyToCmyk","cmy","k","xyzToLab","x","z","labToLch","atan2","PI","sqrt","lch","hr","cos","sin","referenceWhite","y2","x2","z2","rgbToXyz","xyzToOklab","L","cbrt","M","S","okLabToXyz","lRgb","findClosestColor","namedColorsRgb","minDistance","Infinity","closestColor","lab1","color","lab2","distance","colorConversion"],"sources":["../../../src/utils/conversions.ts"],"sourcesContent":["/*\n  Color conversion functions. 'Normalized' means 0-1 range.\n  Formulae from https://www.easyrgb.com/en/math.php\n*/\n\nimport {\n  type CmykObject,\n  type ColorConversionInterface,\n  type ColorObjType,\n  type HslObject,\n  type HsvObject,\n  type LabObject,\n  type LchObject,\n  type RgbObject,\n  type XyzObject,\n} from \"../types\";\nimport { convertDecimalToHex, expandHex, labDeltaE } from \"./utilities\";\nimport { M1, M2, invM1, invM2, referenceWhiteConstants } from \"../constants\";\n\n/*\n   RGB / RGBA conversions\n*/\n\nexport function toRgbBase(colorObj: ColorObjType): RgbObject {\n  if (colorObj.format === \"rgb\" || colorObj.format === \"rgba\") {\n    return rgbToNormalizedRgb(colorObj.value as RgbObject);\n  }\n  if (colorObj.format === \"name\" && typeof colorObj.value === \"string\") {\n    return hexToNormalizedRgb(colorObj.value);\n  }\n  if (colorObj.format === \"hex\" && typeof colorObj.value === \"string\") {\n    return rgbToNormalizedRgb(hexToRgb(colorObj.value));\n  }\n  if (colorObj.format === \"hsl\") {\n    return hslToRgbNormalized(colorObj.value as HslObject);\n  }\n  if (colorObj.format === \"hsv\") {\n    return hsvToRgbNormalized(colorObj.value as HsvObject);\n  }\n  if (colorObj.format === \"lch\") {\n    const lab = lchToLab(colorObj.value as LchObject);\n    const xyz = labToXyz(lab);\n    return xyzToRgbNormalized(xyz);\n  }\n  if (colorObj.format === \"oklch\") {\n    const oklab = lchToLab(colorObj.value as LchObject);\n    const lRGB = okLabToLinearRgb(oklab);\n    return lRgbToNormalizedRgb(lRGB);\n  }\n\n  return {\n    r: undefined,\n    g: undefined,\n    b: undefined,\n    a: undefined,\n  };\n}\n\nexport function hexToNormalizedRgb(hexColor: string): RgbObject {\n  const rgb = hexToRgb(hexColor);\n  return rgbToNormalizedRgb(rgb);\n}\n\nexport function rgbNormalizedToRgb(rgb: RgbObject): RgbObject {\n  return {\n    r: rgb.r !== undefined ? Math.round(rgb.r * 255) : undefined,\n    g: rgb.g !== undefined ? Math.round(rgb.g * 255) : undefined,\n    b: rgb.b !== undefined ? Math.round(rgb.b * 255) : undefined,\n    a: rgb.a ?? undefined,\n  };\n}\n\nexport function rgbNormalizedToRgbPercent(rgb: RgbObject): RgbObject {\n  return {\n    r: rgb.r !== undefined ? Math.round(rgb.r * 100) : undefined,\n    g: rgb.g !== undefined ? Math.round(rgb.g * 100) : undefined,\n    b: rgb.b !== undefined ? Math.round(rgb.b * 100) : undefined,\n    a: rgb.a ?? undefined,\n  };\n}\n\nexport function rgbToNormalizedRgb(rgb: RgbObject): RgbObject {\n  const { r, g, b, a } = rgb;\n  return {\n    r: r !== undefined ? r / 255 : undefined,\n    g: g !== undefined ? g / 255 : undefined,\n    b: b !== undefined ? b / 255 : undefined,\n    a: a ?? undefined,\n  };\n}\n\nexport function lrgbToRgb(lrgb: RgbObject): RgbObject {\n  if (lrgb.r === undefined || lrgb.g === undefined || lrgb.b === undefined) {\n    throw new Error(\"RGB values must be defined\");\n  }\n\n  const fn = (c = 0): number => {\n    const abs = Math.abs(c);\n    return abs > 0.0031308\n      ? 1.055 * Math.pow(abs, 1 / 2.4) - 0.055\n      : 12.92 * abs;\n  };\n\n  return {\n    r: fn(lrgb.r),\n    g: fn(lrgb.g),\n    b: fn(lrgb.b),\n    a: lrgb.a ?? undefined,\n  };\n}\n\n/*\n  Hex / Hex8 conversions\n*/\n\nexport function rgbToHex(rgb: RgbObject): string | undefined {\n  if (rgb.r === undefined || rgb.g === undefined || rgb.b === undefined) {\n    return undefined;\n  }\n  const binaryRgb = (rgb.r << 16) | (rgb.g << 8) | rgb.b;\n  return binaryRgb.toString(16).padStart(6, \"0\");\n}\n\nexport function rgbaToHex8(rgba: RgbObject): string {\n  const binaryRgb = rgbToHex(rgba);\n  if (binaryRgb === undefined) {\n    return \"\";\n  }\n  const aHex = convertDecimalToHex(rgba.a ?? 1);\n  return `${binaryRgb.padStart(6, \"0\")}${aHex === \"0\" ? \"00\" : aHex}`;\n}\n\n/*\n    HSL / HSV conversions\n*/\n\nexport function rgbNormalizedToHsl(rgb: RgbObject): HslObject {\n  if (rgb.r === undefined || rgb.g === undefined || rgb.b === undefined) {\n    throw new Error(\"RGB values must be defined\");\n  }\n\n  const max = Math.max(rgb.r, rgb.g, rgb.b);\n  const min = Math.min(rgb.r, rgb.g, rgb.b);\n\n  let h = (max + min) / 2;\n  let s;\n  const l = (max + min) / 2;\n\n  if (max === min) {\n    h = 0;\n    s = 0; // Achromatic\n  } else {\n    const diff = max - min;\n    s = l > 0.5 ? diff / (2 - max - min) : diff / (max + min);\n\n    switch (max) {\n      case rgb.r:\n        h = (rgb.g - rgb.b) / diff + (rgb.g < rgb.b ? 6 : 0);\n        break;\n      case rgb.g:\n        h = (rgb.b - rgb.r) / diff + 2;\n        break;\n      case rgb.b:\n        h = (rgb.r - rgb.g) / diff + 4;\n        break;\n      default:\n        break;\n    }\n\n    h /= 6;\n  }\n\n  return {\n    h: Math.round(h * 360),\n    s: Math.round(s * 100),\n    l: Math.round(l * 100),\n  };\n}\n\nexport function rgbNormalizedToHsv(rgb: RgbObject): HsvObject {\n  if (rgb.r === undefined || rgb.g === undefined || rgb.b === undefined) {\n    throw new Error(\"RGB values must be defined\");\n  }\n\n  const max = Math.max(rgb.r, rgb.g, rgb.b);\n  const min = Math.min(rgb.r, rgb.g, rgb.b);\n\n  let h = max;\n  let s = max;\n  const v = max;\n\n  const diff = max - min;\n  const diffc = (c: number): number => (max - c) / 6 / diff + 1 / 2;\n\n  if (diff === 0) {\n    h = 0;\n    s = 0;\n  } else {\n    s = diff / max;\n    const rr = diffc(rgb.r);\n    const gg = diffc(rgb.g);\n    const bb = diffc(rgb.b);\n\n    if (rgb.r === max) {\n      h = rgb.b - rgb.g;\n    } else if (rgb.g === max) {\n      h = 1 / 3 + rr - bb;\n    } else if (rgb.b === max) {\n      h = 2 / 3 + gg - rr;\n    }\n\n    if (h < 0) {\n      h += 1;\n    } else if (h > 1) {\n      h -= 1;\n    }\n  }\n\n  return {\n    h: Math.round(h * 360),\n    s: Math.round(s * 100),\n    v: Math.round(v * 100),\n  };\n}\n\nexport function hslToRgbNormalized(hsl: HslObject): RgbObject {\n  function hue2rgb(p: number, q: number, t: number): number {\n    if (t < 0) {\n      t += 1;\n    }\n\n    if (t > 1) {\n      t -= 1;\n    }\n\n    if (t < 1 / 6) {\n      return p + (q - p) * 6 * t;\n    }\n\n    if (t < 1 / 2) {\n      return q;\n    }\n\n    if (t < 2 / 3) {\n      return p + (q - p) * (2 / 3 - t) * 6;\n    }\n\n    return p;\n  }\n\n  const h = (hsl.h ?? 0) / 360;\n  const s = (hsl.s ?? 0) / 100;\n  const l = (hsl.l ?? 0) / 100;\n\n  let r;\n  let g;\n  let b;\n\n  if (s === 0) {\n    r = g = b = l; // Achromatic\n  } else {\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    const p = 2 * l - q;\n\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n\n  return { r, g, b };\n}\n\nexport function hsvToRgbNormalized(hsv: HsvObject): RgbObject {\n  const h = ((hsv.h ?? 0) / 360) * 6;\n  const s = (hsv.s ?? 0) / 100;\n  const v = (hsv.v ?? 0) / 100;\n\n  const i = Math.floor(h);\n  const f = h - i;\n  const p = v * (1 - s);\n  const q = v * (1 - f * s);\n  const t = v * (1 - (1 - f) * s);\n\n  const mod = i % 6;\n\n  const r = [v, q, p, p, t, v][mod];\n  const g = [t, v, v, q, p, p][mod];\n  const b = [p, p, t, v, v, q][mod];\n  return { r, g, b };\n}\n\nexport function hexToRgb(hexColor: string): RgbObject {\n  const hex = expandHex(hexColor);\n  const rgb = parseInt(hex.replace(\"#\", \"\"), 16);\n  return {\n    r: (rgb >> 16) & 0xff,\n    g: (rgb >> 8) & 0xff,\n    b: rgb & 0xff,\n  };\n}\n\n/*\n  CMY / CMYK conversions\n*/\n\nexport function rgbNormalizedToCmy(rgb: RgbObject): CmykObject {\n  if (rgb.r === undefined || rgb.g === undefined || rgb.b === undefined) {\n    throw new Error(\"RGB values must be defined\");\n  }\n\n  return {\n    c: 1 - rgb.r,\n    m: 1 - rgb.g,\n    y: 1 - rgb.b,\n  };\n}\n\nexport function cmyToCmyk(cmy: CmykObject): CmykObject {\n  if (cmy.c === undefined || cmy.m === undefined || cmy.y === undefined) {\n    throw new Error(\"CMY values must be defined\");\n  }\n\n  let k: number = 1;\n  if (cmy.c < k) k = cmy.c;\n  if (cmy.m < k) k = cmy.m;\n  if (cmy.y < k) k = cmy.y;\n  if (k === 1) return { c: 0, m: 0, y: 0, k: 1 };\n  return {\n    c: (cmy.c - k) / (1 - k),\n    m: (cmy.m - k) / (1 - k),\n    y: (cmy.y - k) / (1 - k),\n    k,\n  };\n}\n\n/*\n  XYZ, CIE-L*ab, CIE-L*Ch(ab) conversions\n\n  X, Y and Z output refers to a D65/2Â° standard illuminant.\n\n  Reference white constants are based on the standard illuminant D65:\n  https://en.wikipedia.org/wiki/Illuminant_D65\n\n  The following is a list of reference white points for various standard illuminants:\n  https://en.wikipedia.org/wiki/Standard_illuminant#White_points_of_standard_illuminants\n\n  Pass in a custom reference white point if you want to use a different one, e.g.:\n  { x: 95.047, y: 100, z: 108.883 } for D65\n  { x: 96.422, y: 100, z: 82.521 } for D50\n  { x: 100, y: 100, z: 100 } for E\n*/\n\n// TODO deprecate XYZ, use modern conversions of lRGB instead\n\nexport function xyzToLab(xyz: XyzObject): LabObject {\n  let { x, y, z } = xyz;\n\n  if (x === undefined || y === undefined || z === undefined) {\n    throw new Error(\"XYZ values must be defined\");\n  }\n\n  x /= 95.047;\n  y /= 100;\n  z /= 108.883;\n\n  x = x > 0.008856 ? Math.pow(x, 1 / 3) : 7.787 * x + 16 / 116;\n  y = y > 0.008856 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116;\n  z = z > 0.008856 ? Math.pow(z, 1 / 3) : 7.787 * z + 16 / 116;\n\n  return {\n    l: 116 * y - 16,\n    a: 500 * (x - y),\n    b: 200 * (y - z),\n  };\n}\n\nexport function labToLch(lab: LabObject): LchObject {\n  if (lab.l === undefined || lab.a === undefined || lab.b === undefined) {\n    throw new Error(\"LAB values must be defined\");\n  }\n\n  let h = Math.atan2(lab.b, lab.a);\n  h > 0 ? (h = (h / Math.PI) * 180) : (h = 360 - (Math.abs(h) / Math.PI) * 180);\n\n  return {\n    l: lab.l,\n    c: Math.sqrt(lab.a * lab.a + lab.b * lab.b),\n    h,\n  };\n}\n\nexport function lchToLab(lch: LchObject): LabObject {\n  if (lch.l === undefined || lch.c === undefined || lch.h === undefined) {\n    throw new Error(\"LCH values must be defined\");\n  }\n\n  const hr = (lch.h * Math.PI) / 180;\n\n  return {\n    l: lch.l,\n    a: Math.cos(hr) * lch.c,\n    b: Math.sin(hr) * lch.c,\n  };\n}\n\nexport function labToXyz(\n  lab: LabObject,\n  referenceWhite: Record<string, number> = referenceWhiteConstants,\n): XyzObject {\n  if (lab.l === undefined || lab.a === undefined || lab.b === undefined) {\n    throw new Error(\"LAB values must be defined\");\n  }\n\n  let y = (lab.l + 16) / 116;\n  let x = lab.a / 500 + y;\n  let z = y - lab.b / 200;\n\n  const y2 = Math.pow(y, 3);\n  const x2 = Math.pow(x, 3);\n  const z2 = Math.pow(z, 3);\n\n  y = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n  x = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n  z = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n\n  return {\n    x: x * referenceWhite.x,\n    y: y * referenceWhite.y,\n    z: z * referenceWhite.z,\n  };\n}\n\nexport function xyzToRgbNormalized(xyz: XyzObject): RgbObject {\n  if (xyz.x === undefined || xyz.y === undefined || xyz.z === undefined) {\n    return {\n      r: undefined,\n      g: undefined,\n      b: undefined,\n    };\n  }\n  let { x, y, z } = xyz;\n  x /= 100;\n  y /= 100;\n  z /= 100;\n\n  const r = x * 3.2406 + y * -1.5372 + z * -0.4986;\n  const g = x * -0.9689 + y * 1.8758 + z * 0.0415;\n  const b = x * 0.0557 + y * -0.204 + z * 1.057;\n\n  return {\n    r: r > 0.0031308 ? 1.055 * Math.pow(r, 1 / 2.4) - 0.055 : r * 12.92,\n    g: g > 0.0031308 ? 1.055 * Math.pow(g, 1 / 2.4) - 0.055 : g * 12.92,\n    b: b > 0.0031308 ? 1.055 * Math.pow(b, 1 / 2.4) - 0.055 : b * 12.92,\n  };\n}\n\nexport function rgbToXyz(rgb: RgbObject): XyzObject {\n  let { r, g, b } = rgb;\n\n  if (r === undefined || g === undefined || b === undefined) {\n    throw new Error(\"RGB values must be defined\");\n  }\n\n  r = r > 0.04045 ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92;\n  g = g > 0.04045 ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92;\n  b = b > 0.04045 ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;\n\n  r *= 100;\n  g *= 100;\n  b *= 100;\n\n  return {\n    x: r * 0.4124 + g * 0.3576 + b * 0.1805,\n    y: r * 0.2126 + g * 0.7152 + b * 0.0722,\n    z: r * 0.0193 + g * 0.1192 + b * 0.9505,\n  };\n}\n\n/*\n  OKLAB <- -> XYZ conversions\n  Formula from https://bottosson.github.io/posts/oklab/\n\n  OKLAB uses a D65/10Â° standard illuminant.\n\n  OKLCH uses the same conversion as LCH, but with the OKLAB color space.\n*/\n\nexport function xyzToOklab(xyz: XyzObject): LabObject {\n  if (xyz.x === undefined || xyz.y === undefined || xyz.z === undefined) {\n    throw new Error(\"XYZ values must be defined\");\n  }\n\n  const L = Math.cbrt(xyz.x * M1[0][0] + xyz.y * M1[0][1] + xyz.z * M1[0][2]);\n  const M = Math.cbrt(xyz.x * M1[1][0] + xyz.y * M1[1][1] + xyz.z * M1[1][2]);\n  const S = Math.cbrt(xyz.x * M1[2][0] + xyz.y * M1[2][1] + xyz.z * M1[2][2]);\n\n  return {\n    l: M2[0][0] * L + M2[0][1] * M + M2[0][2] * S,\n    a: M2[1][0] * L + M2[1][1] * M + M2[1][2] * S,\n    b: M2[2][0] * L + M2[2][1] * M + M2[2][2] * S,\n  };\n}\n\n// TODO giving largely inflated numbers\nexport function okLabToXyz(oklab: LabObject): XyzObject {\n  if (oklab.l === undefined || oklab.a === undefined || oklab.b === undefined) {\n    throw new Error(\"OKLAB values must be defined\");\n  }\n\n  const L = Math.pow(\n    oklab.l * invM2[0][0] + oklab.a * invM2[0][1] + oklab.b * invM2[0][2],\n    3,\n  );\n  const M = Math.pow(\n    oklab.l * invM2[1][0] + oklab.a * invM2[1][1] + oklab.b * invM2[1][2],\n    3,\n  );\n  const S = Math.pow(\n    oklab.l * invM2[2][0] + oklab.a * invM2[2][1] + oklab.b * invM2[2][2],\n    3,\n  );\n\n  return {\n    x: L * invM1[0][0] + M * invM1[0][1] + S * invM1[0][2],\n    y: L * invM1[1][0] + M * invM1[1][1] + S * invM1[1][2],\n    z: L * invM1[2][0] + M * invM1[2][1] + S * invM1[2][2],\n  };\n}\n\nexport function okLabToLinearRgb(oklab: LabObject): RgbObject {\n  let L = oklab.l / 100 + 0.3963377774 * oklab.a + 0.2158037573 * oklab.b;\n  let M = oklab.l / 100 - 0.1055613458 * oklab.a - 0.0638541728 * oklab.b;\n  let S = oklab.l / 100 - 0.0894841775 * oklab.a - 1.291485548 * oklab.b;\n\n  L = L * L * L;\n  M = M * M * M;\n  S = S * S * S;\n\n  return {\n    r: 4.0767416621 * L - 3.3077115913 * M + 0.2309699292 * S,\n    g: -1.2684380046 * L + 2.6097574011 * M - 0.3413193965 * S,\n    b: -0.0041960863 * L - 0.7034186147 * M + 1.707614701 * S,\n  };\n}\n\nexport function lRgbToNormalizedRgb(lRgb: RgbObject): RgbObject {\n  const fn = (c = 0): number => {\n    const abs = Math.abs(c);\n    return abs > 0.0031308\n      ? 1.055 * Math.pow(abs, 1 / 2.4) - 0.055\n      : 12.92 * abs;\n  };\n\n  return {\n    r: fn(lRgb.r),\n    g: fn(lRgb.g),\n    b: fn(lRgb.b),\n  };\n}\n\n/*\n  Other conversions\n*/\nexport function findClosestColor(\n  rgb: RgbObject,\n  namedColorsRgb: Record<string, RgbObject>,\n): string {\n  let minDistance = Infinity;\n  let closestColor = \"\";\n  const lab1 = xyzToLab(rgbToXyz(rgb));\n  for (const color in namedColorsRgb) {\n    const lab2 = xyzToLab(rgbToXyz(namedColorsRgb[color]));\n    const distance = labDeltaE(lab1, lab2);\n    if (distance < minDistance) {\n      closestColor = color;\n      minDistance = distance;\n    }\n  }\n  return closestColor;\n}\n\nconst colorConversion: ColorConversionInterface = {\n  toRgbBase,\n  hexToNormalizedRgb,\n  rgbNormalizedToRgb,\n  rgbNormalizedToRgbPercent,\n  rgbToNormalizedRgb,\n  lrgbToRgb,\n  rgbToHex,\n  rgbaToHex8,\n  rgbNormalizedToHsl,\n  rgbNormalizedToHsv,\n  hslToRgbNormalized,\n  hsvToRgbNormalized,\n  hexToRgb,\n  rgbNormalizedToCmy,\n  cmyToCmyk,\n  xyzToLab,\n  labToLch,\n  lchToLab,\n  labToXyz,\n  xyzToRgbNormalized,\n  rgbToXyz,\n  xyzToOklab,\n  okLabToXyz,\n  okLabToLinearRgb,\n  lRgbToNormalizedRgb,\n  findClosestColor,\n};\n\nexport default colorConversion;\n"],"mappings":"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"}