{"version":3,"file":"utilities.js","names":["rgbToXyz","xyzToLab","convertDecimalToHex","d","Math","round","toString","calculateBrightness","rgb","r","g","b","undefined","Error","calculateLuminance","R","G","B","pow","truncateHex","hex","length","expandHex","labEuclideanDistance","lab1","lab2","l","a","sqrt","findClosestColor","namedColorsRgb","minDistance","Infinity","closestColor","color","distance"],"sources":["../../../src/utils/utilities.ts"],"sourcesContent":["import { type LabObject, type RgbObject } from '../types'\nimport { rgbToXyz, xyzToLab } from './conversions'\n\nexport function convertDecimalToHex (d: number): string {\n  return Math.round(d * 255).toString(16)\n}\n\nexport function calculateBrightness (rgb: RgbObject): number {\n  const { r, g, b } = rgb\n  if (r === undefined || g === undefined || b === undefined) {\n    throw new Error('RGB values must be defined')\n  }\n  return (r * 299 + g * 587 + b * 114) / 1000\n}\n\n// http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\nexport function calculateLuminance (rgb: RgbObject): number {\n  const { r, g, b } = rgb\n  if (r === undefined || g === undefined || b === undefined) {\n    throw new Error('RGB values must be defined')\n  }\n  let R, G, B\n  if (r <= 0.03928) R = r / 12.92; else R = Math.pow((r + 0.055) / 1.055, 2.4)\n  if (g <= 0.03928) G = g / 12.92; else G = Math.pow((g + 0.055) / 1.055, 2.4)\n  if (b <= 0.03928) B = b / 12.92; else B = Math.pow((b + 0.055) / 1.055, 2.4)\n  return 0.2126 * R + 0.7152 * G + 0.0722 * B\n}\n\nexport function truncateHex (hex: string): string {\n  if (hex.length === 6) {\n    if (hex[2] === hex[3] && hex[4] === hex[5]) {\n      return hex[0] + hex[1] + hex[2]\n    }\n  }\n  return hex\n}\n\nexport function expandHex (hex: string): string {\n  if (hex.length === 3) {\n    return hex[0] + hex[1] + hex[2] + hex[2] + hex[2] + hex[2]\n  }\n  return hex\n}\n\nexport function labEuclideanDistance (lab1: LabObject, lab2: LabObject): number {\n  if (lab1.l === undefined || lab1.a === undefined || lab1.b === undefined || lab2.l === undefined || lab2.a === undefined || lab2.b === undefined) {\n    throw new Error('Lab values must be defined')\n  } // TODO can we do 'any' === undefined inside of the lab1 and lab2 objects?\n  return Math.sqrt(Math.pow(lab1.l - lab2.l, 2) + Math.pow(lab1.a - lab2.a, 2) + Math.pow(lab1.b - lab1.b, 2))\n}\n\nexport function findClosestColor (rgb: RgbObject, namedColorsRgb: Record<string, RgbObject>): string {\n  let minDistance = Infinity\n  let closestColor = ''\n  const lab1 = xyzToLab(rgbToXyz(rgb))\n  for (const color in namedColorsRgb) {\n    const lab2 = xyzToLab(rgbToXyz(namedColorsRgb[color]))\n    const distance = labEuclideanDistance(lab1, lab2)\n    if (distance < minDistance) {\n      closestColor = color\n      minDistance = distance\n    }\n  }\n  return closestColor\n}\n"],"mappings":"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"}