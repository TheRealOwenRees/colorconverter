{"version":3,"file":"colorconvertor.js","names":["inputParser","rgbaToHexA","rgbToHex","rgbToHsl","rgbToHsv","toRgbBase","calculateBrightness","calculateLuminance","truncateHex","namedColors","ColorConvertor","colorInput","_colorInput","_colorObj","_rgbObj","prototype","getInput","isValid","value","undefined","toRgb","toRgbString","format","r","g","b","a","toHsv","toHsvString","h","s","v","toHsl","toHslString","l","toHex","toHexString","toHexA","getAlpha","toHexAString","getBrightness","getLuminance","isDark","isLight","getFormat","setAlpha","newAlpha","Error","toNormalizedRgb","toNormalizedRgba","toName","hex","color","toPercentageRgb","toPercentageRgbString"],"sources":["../../src/colorconvertor.ts"],"sourcesContent":["/*\n    Color Convertor\n    Owen Rees, MIT License, 2024\n\n    based on https://github.com/bgrins/TinyColor\n*/\n\nimport { type ColorConvertorInstance, type RgbObject } from './types'\nimport { inputParser } from './utils/inputParser'\nimport { rgbaToHexA, rgbToHex, rgbToHsl, rgbToHsv, toRgbBase } from './utils/conversions'\nimport { calculateBrightness, calculateLuminance, truncateHex } from './utils/utilities'\nimport namedColors from './utils/namedColors'\n\nfunction ColorConvertor (this: ColorConvertorInstance, colorInput: string): void {\n  this._colorInput = colorInput // string input of any color format\n  this._colorObj = inputParser(this._colorInput) // Color info object. E.g. { format: 'hex', value: '#ffffff' }\n  this._rgbObj = toRgbBase(this._colorObj) // RGB color info object. E.g. { format: 'rgb', value: { r: 255, g: 255, b: 255 }\n}\n\nColorConvertor.prototype = {\n  getInput () {\n    return this._colorObj\n  },\n  isValid () {\n    return this._colorObj.value !== undefined\n  },\n  toRgb (this: ColorConvertorInstance) {\n    return toRgbBase(this.getInput())\n  },\n  toRgbString () {\n    const { format, value: { r, g, b, a } } = this._rgbObj\n    return `${format}(${r}, ${g}, ${b}${a !== undefined ? `, ${a}` : ''})`\n  },\n  toHsv () {\n    return rgbToHsv(this._rgbObj.value as RgbObject)\n  },\n  toHsvString () {\n    const { h, s, v } = rgbToHsv(this._rgbObj.value as RgbObject)\n    return `hsv(${h}, ${s}%, ${v}%)`\n  },\n  toHsl () {\n    return rgbToHsl(this._rgbObj.value as RgbObject)\n  },\n  toHslString () {\n    const { h, s, l } = rgbToHsl(this._rgbObj.value as RgbObject)\n    return `hsl(${h}, ${s}%, ${l}%)`\n  },\n  toHex () {\n    return rgbToHex(this._rgbObj.value as RgbObject)\n  },\n  toHexString () {\n    return `#${this.toHex()}`\n  },\n  toHexA () {\n    const { r, g, b } = this._rgbObj.value\n    const a = this.getAlpha()\n    return rgbaToHexA({ r, g, b, a })\n  },\n  toHexAString () {\n    return `#${this.toHexA()}`\n  },\n  getBrightness () {\n    return calculateBrightness(this._rgbObj.value as RgbObject)\n  },\n  getLuminance () {\n    return calculateLuminance(this._rgbObj.value as RgbObject)\n  },\n  isDark () {\n    return this.getBrightness() < 128\n  },\n  isLight () {\n    return this.getBrightness() >= 128\n  },\n  getFormat () {\n    return this._rgbObj.format\n  },\n  getAlpha () {\n    let { a } = this._rgbObj.value\n    a = a === undefined ? 1 : a // 100% alpha if working with rgb values\n    return a\n  },\n  setAlpha (newAlpha: number) {\n    if (newAlpha < 0 || newAlpha > 1) {\n      throw new Error('Alpha value must be between 0 and 1')\n    }\n    const { r, g, b } = this._rgbObj.value\n    const a = newAlpha\n    this._rgbObj.value = { r, g, b, a }\n    return this._rgbObj\n  },\n  toNormalizedRgb () {\n    const { r, g, b } = this._rgbObj.value\n    return { r: r / 255, g: g / 255, b: b / 255 }\n  },\n  toNormalizedRgba () {\n    const { r, g, b } = this._rgbObj.value\n    const a = this.getAlpha()\n    return { r: r / 255, g: g / 255, b: b / 255, a }\n  },\n  toName (this: ColorConvertorInstance) {\n    const hex = truncateHex(this.toHex())\n    for (const color in namedColors) {\n      if (namedColors[color] === hex) {\n        return color\n      }\n    }\n    return undefined\n  },\n  // toNearestNamedColor () {\n  //   return 'not implemented'\n  // },\n  // toNearestWebSafeColor () {\n  //   return 'not implemented'\n  // },\n  toPercentageRgb () {\n    const { r, g, b } = this._rgbObj.value\n    return { r: r / 255 * 100, g: g / 255 * 100, b: b / 255 * 100 }\n  },\n  toPercentageRgbString () {\n    const { r, g, b } = this.toPercentageRgb()\n    return `rgb(${r}%, ${g}%, ${b}%)`\n  }\n}\n\nexport default ColorConvertor\n"],"mappings":"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"}